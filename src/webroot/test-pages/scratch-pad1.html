<!doctype html>
<html lang="ko">
  <head>
    <title>연습장 #1</title>
    <meta charset="utf-8" />
    <!-- <meta http-equiv="Content-Security-Policy" content="style-src 'self' 'unsafe-inline';" /> -->
    <!-- <meta http-equiv="Content-Security-Policy" content="style-src 'self';" /> -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png" href="/images/favicon.png" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="stylesheet" href="/styles/normalize.css" />
    <link rel="stylesheet" href="/styles/letters.css" />
    <link rel="stylesheet" href="/styles/style.css" />
    <link rel="stylesheet" href="/lib/prism/prism.css" />
    <script src="/lib/prism/prism.js"></script>
    <script type="module" src="/js/fire-when-ready.js"></script>
  </head>

  <body>
    <header>
      <nav></nav>
    </header>

    <main>
      <article>
        <h1>연습장 #1</h1>

        <section>
          <div id="toc" class="mrgn-btm"></div>
        </section>

        <section>
          <p>콘솔창을 열어볼 것</p>
          <div id="note"></div>

          <section id="first">
            <input type="text" />
            <br />
            <input type="text" title="테스트1" />
            <br />
            <label for="foo1">야호</label><input type="text" id="foo1" style="display: none" />
            <br />
          </section>

          <section id="second">
            <button type="button">버튼1</button>
            <button type="button" title="버튼2">btn2</button>
            <br />
            <button type="button" id="btn3">버튼3</button>
            <button type="button" id="btn4"><span>버튼4</span>버튼44</button>
          </section>
        </section>
      </article>
    </main>

    <script>
      let originalData = [
        {no: 1, cname: '캠페인A', amount: 100},
        {no: 3, cname: '캠페인B', amount: 100},
        {no: 4, cname: '캠페인B', amount: 150},
        {no: 2, cname: '캠페인B', amount: 50},
        {no: 2, cname: '캠페인C', amount: 100},
        {no: 4, cname: '캠페인C', amount: 300},
        {no: 3, cname: '캠페인C', amount: 200}
      ];

      // Set 타입으로 뽑아낸 캠페인 이름: 컬럼 헤더로 활용 가능
      let colHeaderNames = new Set();
      originalData.forEach(ele => {
        colHeaderNames.add(ele.cname);
      });
      console.debug('colHeaderNames:', colHeaderNames);

      // 아이비시트에 전달할 데이터 만들기
      let rows = [];
      originalData.forEach(ele => {
        let obj = rows.find(row => {
          return ele.no === row.no;
        });
        if (!obj) {
          obj = {
            no: ele.no,
            [ele.cname]: ele.amount
          };
          rows.push(obj);
        } else {
          obj[ele.cname] = ele.amount;
        }
      });
      rows.sort((a, b) => {
        return a.no < b.no;
      });
      console.dir('rows:', rows);
    </script>
  </body>
  <footer>
    <div class="button-wrapper">
      <a class="back-button" href="/">⬅ 홈으로 돌아가기</a>
    </div>
  </footer>
</html>
